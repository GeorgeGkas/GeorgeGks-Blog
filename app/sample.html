<!DOCTYPE html>
<html>
<title>Learning to COPE with Microservices</title>
<!-- Meta first-->
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta charset="UTF-8">
<!-- Load Fonts-->
<link href="https://fonts.googleapis.com/css?family=Ubuntu:300,400,700" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Amatica+SC" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Dancing+Script" rel="stylesheet">
<link href='https://fonts.googleapis.com/css?family=Open+Sans+Condensed:300,700&subset=latin,greek' rel='stylesheet' type='text/css'>
<!--build:css css/single-post.min.css-->
<link type="text/css" rel="stylesheet" href="public/css/main.css"></link>
<link type="text/css" rel="stylesheet" href="public/css/pages/single-post.css"></link>
<!--endbuild-->
</head>

<body>
    <div class="container">
        <header id="page-header">
            <div class="pull-left">
                <a href="index.html" id="jumbotron">
                    <span class="glyphicon glyphicon-arrow-left"></span>
                </a>
            </div>
            <h1>My Blog</h1>
            <p>... get.SinglePost(); ...</p>
        </header>
        <div class="container-fluid">
            <main role="main" id="main-view">
                <section id="post-content">
                    <article class="col-sm-12">
                        <div class="single-card single-quote">
                            <div class="single-quote-card">
                                <blockquote>
                                    <p>
                                       Microservices are a more concrete and modern interpretation of service-oriented architectures (SOA) used to build distributed software systems. Like in SOA, services in a microservice architecture are processes that communicate with each other over the network in order to fulfill a goal. Learn how to use it now!
                                    </p>
                                </blockquote>
                            </div>
                            <div class="single-card-footer-with-pencil">
                                <p class="posted-date">22 July 2016</p>
                                <p class="single-card-stats">
                                    <span class="block">
                                        <span class="glyphicon glyphicon-heart"></span><span class="heart-counter">14</span>
                                    </span>
                                    <span class="block">
                                        <span class="glyphicon glyphicon-comment"></span><span class="comments-counter">3</span>
                                    </span>
                                    <span class="block">
                                        <span class="glyphicon glyphicon-pencil"></span>
                                    </span>
                                </p>
                            </div>
                        </div>
                    </article>
                </section>
                <section id="article-content">
                    <article>
                        <header id="article-head">
                            <h1 id="article-title">Learning to COPE with Microservices </h1>
                            <p id="article-author">Created by Eduardo Bouças</p>
                        </header>
                        <article id="article-body">
                            <p>
                            I vividly remember my first encounter with a content management system: It was 2002 with a platform called <a href="https://en.wikipedia.org/wiki/PHP-Nuke">PHP-Nuke</a>. It offered a control panel where site administrators could publish new content that would be immediately available to readers, without the need to create/edit HTML files and upload them via FTP (which at the time was the only reality I knew).
                            </p>

                            <p>
                                Once I'd made the jump to a CMS, I didn't look back. CMSs quickly became part of my toolkit as a web developer, and I didn’t really stop to question how they worked. I spent a lot of time learning my way around the various components of the web stack; falling in and out of love with different languages, paradigms, frameworks and tools. It took me a long time to stop and think about the most important part of any system: how it manages and stores content.
                            </p>
                            <p>
                                I set out on a quest to learn more about what's under the hood of a CMS: how it really works and what it actually does when we ask it to handle things like users, articles or taxonomy.
                            </p>

                            <p>
                                I realised there's something curious about the way platforms like WordPress or Drupal had evolved, in that they became much more than just content editing tools, gradually turning into the backbone of entire systems. These platforms - which power millions of websites - control everything from the database and its structure to the business logic, all the way down to the front-end templates.
                            </p>

                            <p>
                                This seemed to me to be a lot of power and responsibility for a single tool. I wanted to find out if that could be a problem.
                            </p>
                            <p class="section-title">
                                Looking around and ahead
                            </p>

                            <p>
                                We live in a multi-channel and multi-device world. It's critical that different types of systems - like third-party websites or native applications - are able to interact with your data. Are the current crop of CMS platforms prepared for this?
                            </p>

                            <p>
                                For example, WordPress runs on PHP with a MySQL database. Does that mean that every other system that needs to communicate with it needs to run PHP? If other systems want to insert new data, do they need to be able to connect to a MySQL database?
                            </p>

                            <p>
                                In an ideal world, the system would be able to communicate using a language that others could understand, regardless of the technology it’s written in.
                            </p>

                            <p>
                                And what happens if your content management requirements change? Editorial workflow plays a fundamental role in many organisations, and as they evolve and grow (or shrink!) it’s only natural that their processes will need to change too. Some CMSs can adapt to meet a new set of requirements, but many can’t.
                            </p>

                            <p>
                                If your CMS can’t adapt to changing requirements you could easily find yourself looking for a new system. This raises many more questions:
                            </p>


                            <ul>
                                <li>
                                    What happens to the existing data structure? Is it flexible enough to be plugged into another platform?
                                </li>
                                <li>
                                    Are you wed to your existing tech stack?
                                </li>
                                <li>
                                    How much refactoring will be required to adapt your front-end templates to a new CMS?
                                </li>
                            </ul>

                            <p>
                                It’s also important to consider a more extreme scenario: what if there isn’t a website at all? Downplaying the role of a web presence in favor of a native application is a fairly common occurrence. Indeed many projects might not involve a website at all. Is it still okay for a traditional web CMS to be running the show?
                            </p>

                            <p>
                                From my perspective I want to give editors a single platform that they can use to publish content, regardless of the end systems that will consume it. Remember that for an editor the CMS is their only window to the world; they spend time working with the editing interface. Changing their interfaces to allow support for different devices over time, or as is more common, forcing them to create and publish content in more than one place to target those devices, has a severe impact on productivity.
                            </p>

                            <p class="section-title">
                                Headless CMS and COPE
                            </p>

                            <p>
                                A typical CMS is a monolithic application with at least four components under the hood:
                            </p>

                            <ol>
                                <li>
                                    A data layer where all the content is stored;
                                </li>
                                <li>
                                    A web-based interface where editors can create and edit content, as well as manage taxonomy and multimedia assets (CRUD UI);
                                </li>
                                <li>
                                    An interface where site administrators can create and design pages in the form of templates;
                                </li>
                                <li>
                                    A system that applies content from the database against the templates, generating an output to be consumed by end users (in the case of a website, this will be HTML).
                                </li>
                                                               
                            </ol>
                            
                            <p>
                                The concept of a <a href="https://css-tricks.com/what-is-a-headless-cms/">"headless CMS"</a> sets out to tackle this tight coupling of components, removing the concerns highlighted above. The idea is simple: separate numbers 1 and 2 from 3 and 4, adding an API layer that receives and delivers data to the database and communicates with the outside world using a universal language (typically JSON).
                            </p>

                            <figure>
                                <img class="center-block" src="https://cdn.css-tricks.com/wp-content/uploads/2016/07/headless.png" />
                                <figcaption>
                                    Fig. 1 — Comparison between a monolithic CMS and a headless CMS
                                </figcaption>
                            </figure>

                            <p>
                                Working in this way the front-end is completely decoupled from the data that feeds it, which means it’s no longer limited by the tech stack adopted by the CMS - you could have a Node.js server pulling data from a headless Drupal running PHP, or even a static HTML page getting data from the API using a client-side JavaScript application.
                            </p>

                            
                            <p>
                                Because pretty much anyone can speak JSON, this also creates the possibility for other systems to consume the data, without forcing editors to publish it multiple times on different platforms. This key principle is the basis of COPE (Create Once, Publish Everywhere) and is a powerful way of delivering content to a multi-medium, multi-device audience.
                            </p>

                            <p>
                                This was the approach I took when asked by a publishing company to make their WordPress installation capable of delivering content to multiple front-end systems running on different tech stacks (as well as native mobile applications and advertising units).
                            </p>

                            
                            <p>
                                I created a custom API layer, on top of WP REST API, and documented the journey in an article that you can find <a href="https://css-tricks.com/thoughts-on-an-api-first-wordpress/" >here</a>. What you’re now reading is a follow up to that: my continued pursuit of a truly decoupled, flexible and scalable COPE system.
                            </p>

                            <p class="section-title">
                                Enter Microservices
                            </p>

                            
                            <p>
                                The headless CMS approach solved most of my concerns, but not all of them. Even though the data was now detached from the front-end, the database and the CMS were still very much coupled together: still a problem if I wanted to change the CMS because, as the diagram shows, everything that goes in and out of the database still goes through it. (Even the new shiny API that communicates with the outside world.)
                            </p>

                            <p>
                                This setup also raises questions about scalability: with the CMS and API glued together, how easy is it to scale the system? For example the nature of the traffic hitting those two components will be significantly different, so it would probably make sense to put them under different load balancers.
                            </p>

                            
                            <p>
                                To tackle this I wanted to split the CMS from the API and run them both as self-contained and deployable services. I started working with the guys at DADI, using their open-source platform for content and data management, which is built specifically in support of microservices and the principle of COPE. Their stack is a suite of modular, interchangeable and deployable services, built on Node.js, with the following components:
                            </p>

                            <p class="section-title">
                                API
                            </p>

                            
                            <p>
                                A high-performance RESTful API. Content is stored as documents and grouped in collections. Each collection is defined with a JSON schema file, where fields, validation rules and other data attributes are defined.
                            </p>

                            <p>
                                Documents are stored and retrieved by querying collections on specific REST endpoints. In addition to this, API also exposes endpoints to edit any configuration file, such as collection schemas, meaning that you can also use REST to create or edit collections.
                            </p>

                            <p>
                                To provide maximum flexibility it also offers custom endpoints, which can respond to any of the REST verbs with custom logic (and make use of the data models to query the database), as well as hooks that trigger custom routines at key moments in the lifecycle of a request.
                            </p>

                            <p>
                                To make the integration of API with other systems even easier, there’s a suite of libraries like <a href="https://github.com/dadi/passport"> Passport</a>, to abstract the authentication layer (available for Node.js, PHP and React Native), or <a href="https://github.com/dadi/api-wrapper" >API wrapper</a>, a high level toolkit for performing CRUD operations.
                            </p>

                            <p id="article-end">***</p>
                            <p id="article-post-date">As posted in the morning of
                                <time datetime="2016-7-8">22 July 2016</time>
                            </p>
                        </article>
                    </article>
                </section>
            </main>
            <section id="aboutAuthor">
                <div id="aboutWrapper" class="clearfix row ">
                    <div id="authorImage" class="col-sm-4">
                        <div id="image-placeholder" style="background-image: url('https://avatars3.githubusercontent.com/u/544572?v=3&s=460');"></div>
                    </div>
                    <div id="authorSmallBio" class="col-sm-8">
                        <p id="author-role">Admin|Guest Author</p>
                        <p id="author-description">
                            Hi. I'm Dionysis. I'm a cryptography PhD student at the University of Athens. I live in Athens, Greece. I studied Electrical and Computer Engineering at the National Technical University of Athens in Greece. My research interests include applied cryptography and cryptocurrencies. In the past, I worked for OpenBazaar, Google, Twitter, and deviantART.
                        </p>
                    </div>
                </div>
            </section>
            <section id="get-updates-and-fav">
                <form method="post" id="email-subscription-form">
                    <p id="offer-email-subscription">
                        Did you like this post?
                    </p>
                    <p id="got-email-subscription">
                        You will get more in your email soon.
                    </p>
                    <input type="text" autocomplete="off" placeholder="feed it with email" id="email-subscription-input" />
                    <button type="submit" id="email-subscription-button">
                        <span>Get email updates</span>
                    </button>
                </form>
                <div id="fav-post">
                    <p id="fav-head">Press the love button</p>
                    <span role="button" class="glyphicon glyphicon-heart-empty fav" id="post-favorite-button"></span>
                    <span class="glyphicon glyphicon-heart fav fav-after" id="post-favorite-button-after"></span>
                    <p id="fav-added">+1</p>
                </div>
            </section>
            <section id="social-section">
                <div id="comments">
                    <ol id="comments-list">
                        <li class="single-comment clearfix" id="comm1">
                            <div class="user">
                                Os1r1s110
                                <span class="glyphicon glyphicon-heart pull-right comment-heart comment-favorite-button-after"></span>
                                <span class="glyphicon glyphicon-heart-empty pull-right comment-heart comment-favorite-button"></span>
                                <span class="comment-heart-count pull-right">0</span>
                            </div>
                            <div class="comment-body">
                                Is there a good place to find tutorials about dadi web/cdn?
                            </div>
                            
                            <div class="comment-post-date">
                                posted on
                                <time datetime="2016-6-12">July 22 2016</time>
                            </div>
                        </li>
                        <li class="single-comment clearfix" id="comm2">
                            <div class="user">
                                Os1r1s110
                                <span class="glyphicon glyphicon-heart pull-right comment-heart comment-favorite-button-after"></span>
                                <span class="glyphicon glyphicon-heart-empty pull-right comment-heart comment-favorite-button"></span>
                                <span class="comment-heart-count pull-right">0</span>
                            </div>
                            <div class="comment-body">
                                found this I guess it will be a good starting point. <a href="https://github.com/dadi/web/tree/docs">https://github.com/dadi/web/tree/docs</a>
                            </div>
                            <div class="comment-post-date">
                                posted on
                                <time datetime="2016-6-12">July 22 2016</time>
                            </div>
                        </li>
                        <li class="single-comment clearfix" id="comm3">
                            <div class="user">
                                Eduardo Bouças
                                <span class="glyphicon glyphicon-heart pull-right comment-heart comment-favorite-button-after"></span>
                                <span class="glyphicon glyphicon-heart-empty pull-right comment-heart comment-favorite-button"></span>
                                <span class="comment-heart-count pull-right">1</span>
                            </div>
                            <div class="comment-body">
                                @Os1r1s110 We’re working on that! There is a new site with documentation for all the components in the works. We’ll also be working on tutorials.

In the meantime, you’re right; the docs branch of each repository is the best place to get started.

Feel free to get in touch if you get stuck.
                            </div>
                            <div class="comment-post-date">
                                posted on
                                <time datetime="2016-6-12">July 22 2016</time>
                            </div>
                        </li>
                        <li class="single-comment clearfix" id="comm4">
                            <div class="user">
                                tojihi
                                <span class="glyphicon glyphicon-heart pull-right comment-heart comment-favorite-button-after"></span>
                                <span class="glyphicon glyphicon-heart-empty pull-right comment-heart comment-favorite-button"></span>
                                <span class="comment-heart-count pull-right">0</span>
                            </div>
                            <div class="comment-body">
                                very useful.this system that talking about it is very interesting and exciting…
                            </div>
                            <div class="comment-post-date">
                                posted on
                                <time datetime="2016-6-12">July 22 2016</time>
                            </div>
                        </li>
                        <li class="single-comment clearfix" id="comm5">
                            <div class="user">
                                someone
                                <span class="glyphicon glyphicon-heart pull-right comment-heart comment-favorite-button-after"></span>
                                <span class="glyphicon glyphicon-heart-empty pull-right comment-heart comment-favorite-button"></span>
                                <span class="comment-heart-count pull-right">15423</span>
                            </div>
                            <div class="comment-body">
                            Why don't take a look at this
                                <pre>
                                    <code class="language-js">
var DadiAPI = require('@dadi/api-wrapper');
var api = new DadiAPI({
  uri: 'http://api.example.com',
  port: 80,
  credentials: {
    clientId: 'johndoe',
    secret: 'f00b4r'
  },
  version: 'vjoin',
  database: 'testdb',
  debug: true
});
                                    </code>
                                </pre>
                                Of course this is jsut and eample.
                            </div>
                            <div class="comment-post-date">
                                posted on
                                <time datetime="2016-6-12">July 22 2016</time>
                            </div>
                        </li>
                    </ol>
                    <div id="comment-post-area">
                        <div id="comment-post-message">
                            Thank you. Just wait for moderator acceptance.
                        </div>
                        <form id="comment-post-form">
                            <div id="user">
                                <input type="text" placeholder="Your name here." id="comment-user-name" maxlength="25" />
                            </div>
                            <div id="email">
                                <input type="text" placeholder="Your email here." id="comment-user-email" />
                            </div>
                            <div id="comment-editor">
                                <textarea placeholder="Leave a comment." onkeyup="textAreaAdjust(this);" rows="2" id="comment-user-body"></textarea>
                            </div>
                            <div id="comment-submit-section">
                                <button type="submit">
                                    <span id="comment-submit-button-content"><span class="glyphicon glyphicon-send"></span>Post</span>
                                </button>
                                <span class="pull-right" id="comment-info"></span>
                            </div>
                        </form>
                    </div>
                </div>
            </section>
        </div>
        <footer id="page-footer">
            <small>Copyright <span class="glyphicon glyphicon-copyright-mark"></span> 2016 George G. Gkasdrogkas</small>
        </footer>
    </div>
    <!--build:js javascript/single-post.min.js -->
    <script src="public/javascript/vendors/jquery.min.js"></script>
    <script src="public/javascript/vendors/nicescroll.min.js"></script>
    <script src="public/javascript/vendors/scrollIntoView.min.js"></script>
    <script src="public/javascript/pages/single-post.js"></script>
    <script src="public/javascript/vendors/prism.min.js"></script>
    <!-- endbuild -->
</body>

</html>
